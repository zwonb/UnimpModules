"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var C=Object.create;var h=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var y=(e,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of x(t))!S.call(e,l)&&l!==s&&h(e,l,{get:()=>t[l],enumerable:!(i=w(t,l))||i.enumerable});return e};var m=(e,t,s)=>(s=e!=null?C(b(e)):{},y(t||!e||!e.__esModule?h(s,"default",{value:e,enumerable:!0}):s,e));var u=_((V,f)=>{f.exports=Vue});var N=m(u());function p(){return uni.getSubNVueById(plus.webview.currentWebview().id)}function c(e,t,...s){uni.__log__?uni.__log__(e,t,...s):console[e].apply(console,[...s,t])}var g=(e,t)=>{let s=e.__vccOpts||e;for(let[i,l]of t)s[i]=l;return s};var o=m(u()),k={"custom-modal":{"":{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:900}},"custom-modal-shadow":{"":{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:10}},"modal-content":{"":{marginTop:0,marginRight:20,marginBottom:0,marginLeft:20,backgroundColor:"#ffffff",borderRadius:3,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",position:"relative",zIndex:20}},"modal-title":{"":{height:60,display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:20,paddingRight:20,paddingBottom:10,paddingLeft:20}},txt:{".modal-title ":{fontSize:18,fontWeight:"bold"},".modal-text ":{fontSize:16,lineHeight:25}},"modal-text":{"":{paddingTop:0,paddingRight:20,paddingBottom:20,paddingLeft:20}},"modal-btn":{"":{paddingTop:0,paddingRight:20,paddingBottom:20,paddingLeft:20,display:"flex",height:40,position:"relative"}},item:{".modal-btn ":{fontSize:16,position:"absolute",top:0},".modal-btn .auto-cancel":{left:20},".modal-btn .cancel":{right:100},".modal-btn .sure":{right:20}},"@FONT-FACE":[{}]},v={data(){return{subNVue:{},width:"",isOpen:!1,title:"\u6E29\u99A8\u63D0\u793A",content:"",shadowClose:!0,showCancel:!0,cancelText:"\u53D6\u6D88",cancelColor:"#999999",autoCancel:!1,autoCancelColor:"#999999",autoCancelSec:5,confirmText:"\u786E\u5B9A",confirmColor:"#1E9FFF",isClick:0,timer:null,defaultValue:{}}},onLoad(){let e=uni.getSystemInfoSync();this.width=e.windowWidth-70,this.subNVue=p(),this.defaultValue={title:this.title,content:this.content,shadowClose:this.shadowClose,showCancel:this.showCancel,cancelText:this.cancelText,cancelColor:this.cancelColor,autoCancel:this.autoCancel,autoCancelColor:this.autoCancelColor,autoCancelSec:this.autoCancelSec,confirmText:this.confirmText,confirmColor:this.confirmColor},uni.$on("showModalShow",this.getParams)},onUnload(){c("log","at pages/prompt/showModal.nvue:86","showModal onUnload"),uni.$off("showModalShow")},methods:{getParams(e){for(let t in e)this[t]=e[t];this.isOpen=!0,this.checkAutoCancel()},reset(){let e=this,t=e.defaultValue;clearTimeout(e.timer),setTimeout(function(){e.isOpen=!1,e.isClick=0;for(let s in t)e[s]=t[s]},500)},closeModal(){if(c("log","at pages/prompt/showModal.nvue:127","myShowModal close"),this.isClick==1)return!1;this.isClick=1,uni.$emit("showModalSuccess",{confirm:!1}),this.subNVue.hide("fade-out",300),this.reset()},sureModal(){if(c("log","at pages/prompt/showModal.nvue:146","myShowModal sure"),this.isClick==1)return!1;this.isClick=1,uni.$emit("showModalSuccess",{confirm:!0}),this.subNVue.hide("fade-out",300),this.reset()},clickShadow(){if(!this.shadowClose)return!1;this.closeModal()},checkAutoCancel(){let e=this;if(!e.autoCancel)return!1;e.countSec()},countSec(){let e=this;if(e.autoCancelSec<=0)return e.closeModal(),!1;e.timer=setTimeout(function(){e.autoCancelSec--,e.countSec()},1e3)}}};function M(e,t,s,i,l,a){return(0,o.openBlock)(),(0,o.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[l.isOpen?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,class:"custom-modal"},[(0,o.createElementVNode)("view",{class:"custom-modal-shadow",onClick:t[0]||(t[0]=(...n)=>a.clickShadow&&a.clickShadow(...n))}),(0,o.createElementVNode)("view",{class:"modal-content",style:(0,o.normalizeStyle)({width:l.width+"px"})},[(0,o.createElementVNode)("view",{class:"modal-title"},[(0,o.createElementVNode)("u-text",{class:"txt"},(0,o.toDisplayString)(l.title),1)]),(0,o.createElementVNode)("view",{class:"modal-text"},[(0,o.createElementVNode)("u-text",{class:"txt"},(0,o.toDisplayString)(l.content),1)]),(0,o.createElementVNode)("view",{class:"modal-btn"},[l.showCancel?((0,o.openBlock)(),(0,o.createElementBlock)("u-text",{key:0,class:"item cancel",style:(0,o.normalizeStyle)({color:l.cancelColor}),onClick:t[1]||(t[1]=(...n)=>a.closeModal&&a.closeModal(...n))},(0,o.toDisplayString)(l.cancelText),5)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("u-text",{class:"item sure",style:(0,o.normalizeStyle)({color:l.confirmColor}),onClick:t[2]||(t[2]=(...n)=>a.sureModal&&a.sureModal(...n))},(0,o.toDisplayString)(l.confirmText)+(0,o.toDisplayString)(l.autoCancel?"("+l.autoCancelSec+"s)":""),5)])],4)])):(0,o.createCommentVNode)("",!0)])}var r=g(v,[["render",M],["styles",[k]]]);var d=plus.webview.currentWebview();if(d){let e=parseInt(d.id),t="pages/prompt/showModal",s={};try{s=JSON.parse(d.__query__)}catch(l){}r.mpType="page";let i=Vue.createPageApp(r,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:s});i.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...r.styles||[]])),i.mount("#root")}})();
